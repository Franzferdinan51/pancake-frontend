{"ast":null,"code":"var _jsxFileName = \"/home/duckets/Documents/pancake-frontend-1/src/views/Pools/components/PoolCard/Modals/CollectModal.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Modal, Text, Button, Heading, Flex, AutoRenewIcon, ButtonMenu, ButtonMenuItem, HelpIcon, useTooltip } from '@pancakeswap/uikit';\nimport { useTranslation } from 'contexts/Localization';\nimport useTheme from 'hooks/useTheme';\nimport { useSousHarvest } from 'hooks/useHarvest';\nimport { useSousStake } from 'hooks/useStake';\nimport useToast from 'hooks/useToast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CollectModal = ({\n  formattedBalance,\n  fullBalance,\n  earningToken,\n  earningsDollarValue,\n  sousId,\n  isBnbPool,\n  isCompoundPool = false,\n  onDismiss\n}) => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    theme\n  } = useTheme();\n  const {\n    toastSuccess,\n    toastError\n  } = useToast();\n  const {\n    onReward\n  } = useSousHarvest(sousId, isBnbPool);\n  const {\n    onStake\n  } = useSousStake(sousId, isBnbPool);\n  const [pendingTx, setPendingTx] = useState(false);\n  const [shouldCompound, setShouldCompound] = useState(isCompoundPool);\n  const {\n    targetRef,\n    tooltip,\n    tooltipVisible\n  } = useTooltip( /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Text, {\n      mb: \"12px\",\n      children: t('Compound: collect and restake CAKE into pool.')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Text, {\n      children: t('Harvest: collect CAKE and send to wallet')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true), {\n    placement: 'bottom-end',\n    tooltipOffset: [20, 10]\n  });\n\n  const handleHarvestConfirm = async () => {\n    setPendingTx(true); // compounding\n\n    if (shouldCompound) {\n      try {\n        await onStake(fullBalance, earningToken.decimals);\n        toastSuccess(`${t('Compounded')}!`, t(`Your ${earningToken.symbol} earnings have been re-invested into the pool!`));\n        setPendingTx(false);\n        onDismiss();\n      } catch (e) {\n        toastError(t('Canceled'), t('Please try again and confirm the transaction.'));\n        setPendingTx(false);\n      }\n    } else {\n      // harvesting\n      try {\n        await onReward();\n        toastSuccess(`${t('Harvested')}!`, t(`Your ${earningToken.symbol} earnings have been sent to your wallet!`));\n        setPendingTx(false);\n        onDismiss();\n      } catch (e) {\n        toastError(t('Canceled'), t('Please try again and confirm the transaction.'));\n        setPendingTx(false);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: `${earningToken.symbol} ${isCompoundPool ? t('Collect') : t('Harvest')}`,\n    onDismiss: onDismiss,\n    headerBackground: theme.colors.gradients.cardHeader,\n    children: [isCompoundPool && /*#__PURE__*/_jsxDEV(Flex, {\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      mb: \"24px\",\n      children: [/*#__PURE__*/_jsxDEV(ButtonMenu, {\n        activeIndex: shouldCompound ? 0 : 1,\n        scale: \"sm\",\n        variant: \"subtle\",\n        onItemClick: index => setShouldCompound(!index),\n        children: [/*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n          as: \"button\",\n          children: t('Compound')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n          as: \"button\",\n          children: t('Harvest')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        ml: \"10px\",\n        ref: targetRef,\n        children: /*#__PURE__*/_jsxDEV(HelpIcon, {\n          color: \"textSubtle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), tooltipVisible && tooltip]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      mb: \"24px\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        children: [shouldCompound ? t('Compounding') : t('Harvesting'), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        flexDirection: \"column\",\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          children: [formattedBalance, \" \", earningToken.symbol]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          fontSize: \"12px\",\n          color: \"textSubtle\",\n          children: `~${earningsDollarValue || 0} USD`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      mt: \"8px\",\n      onClick: handleHarvestConfirm,\n      isLoading: pendingTx,\n      endIcon: pendingTx ? /*#__PURE__*/_jsxDEV(AutoRenewIcon, {\n        spin: true,\n        color: \"currentColor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 30\n      }, this) : null,\n      children: pendingTx ? t('Confirming') : t('Confirm')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"text\",\n      onClick: onDismiss,\n      pb: \"0px\",\n      children: t('Close window')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CollectModal, \"Aetw/46EipZjwAY56i3tkMlxo8s=\", false, function () {\n  return [useTranslation, useTheme, useToast, useSousHarvest, useSousStake, useTooltip];\n});\n\n_c = CollectModal;\nexport default CollectModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"CollectModal\");","map":{"version":3,"sources":["/home/duckets/Documents/pancake-frontend-1/src/views/Pools/components/PoolCard/Modals/CollectModal.tsx"],"names":["React","useState","Modal","Text","Button","Heading","Flex","AutoRenewIcon","ButtonMenu","ButtonMenuItem","HelpIcon","useTooltip","useTranslation","useTheme","useSousHarvest","useSousStake","useToast","CollectModal","formattedBalance","fullBalance","earningToken","earningsDollarValue","sousId","isBnbPool","isCompoundPool","onDismiss","t","theme","toastSuccess","toastError","onReward","onStake","pendingTx","setPendingTx","shouldCompound","setShouldCompound","targetRef","tooltip","tooltipVisible","placement","tooltipOffset","handleHarvestConfirm","decimals","symbol","e","colors","gradients","cardHeader","index"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport {\n  Modal,\n  Text,\n  Button,\n  Heading,\n  Flex,\n  AutoRenewIcon,\n  ButtonMenu,\n  ButtonMenuItem,\n  HelpIcon,\n  useTooltip,\n} from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport useTheme from 'hooks/useTheme'\nimport { useSousHarvest } from 'hooks/useHarvest'\nimport { useSousStake } from 'hooks/useStake'\nimport useToast from 'hooks/useToast'\nimport { Token } from 'config/constants/types'\n\ninterface CollectModalProps {\n  formattedBalance: string\n  fullBalance: string\n  earningToken: Token\n  earningsDollarValue: string\n  sousId: number\n  isBnbPool: boolean\n  isCompoundPool?: boolean\n  onDismiss?: () => void\n}\n\nconst CollectModal: React.FC<CollectModalProps> = ({\n  formattedBalance,\n  fullBalance,\n  earningToken,\n  earningsDollarValue,\n  sousId,\n  isBnbPool,\n  isCompoundPool = false,\n  onDismiss,\n}) => {\n  const { t } = useTranslation()\n  const { theme } = useTheme()\n  const { toastSuccess, toastError } = useToast()\n  const { onReward } = useSousHarvest(sousId, isBnbPool)\n  const { onStake } = useSousStake(sousId, isBnbPool)\n  const [pendingTx, setPendingTx] = useState(false)\n  const [shouldCompound, setShouldCompound] = useState(isCompoundPool)\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\n    <>\n      <Text mb=\"12px\">{t('Compound: collect and restake CAKE into pool.')}</Text>\n      <Text>{t('Harvest: collect CAKE and send to wallet')}</Text>\n    </>,\n    { placement: 'bottom-end', tooltipOffset: [20, 10] },\n  )\n\n  const handleHarvestConfirm = async () => {\n    setPendingTx(true)\n    // compounding\n    if (shouldCompound) {\n      try {\n        await onStake(fullBalance, earningToken.decimals)\n        toastSuccess(\n          `${t('Compounded')}!`,\n          t(`Your ${earningToken.symbol} earnings have been re-invested into the pool!`),\n        )\n        setPendingTx(false)\n        onDismiss()\n      } catch (e) {\n        toastError(t('Canceled'), t('Please try again and confirm the transaction.'))\n        setPendingTx(false)\n      }\n    } else {\n      // harvesting\n      try {\n        await onReward()\n        toastSuccess(`${t('Harvested')}!`, t(`Your ${earningToken.symbol} earnings have been sent to your wallet!`))\n        setPendingTx(false)\n        onDismiss()\n      } catch (e) {\n        toastError(t('Canceled'), t('Please try again and confirm the transaction.'))\n        setPendingTx(false)\n      }\n    }\n  }\n\n  return (\n    <Modal\n      title={`${earningToken.symbol} ${isCompoundPool ? t('Collect') : t('Harvest')}`}\n      onDismiss={onDismiss}\n      headerBackground={theme.colors.gradients.cardHeader}\n    >\n      {isCompoundPool && (\n        <Flex justifyContent=\"center\" alignItems=\"center\" mb=\"24px\">\n          <ButtonMenu\n            activeIndex={shouldCompound ? 0 : 1}\n            scale=\"sm\"\n            variant=\"subtle\"\n            onItemClick={(index) => setShouldCompound(!index)}\n          >\n            <ButtonMenuItem as=\"button\">{t('Compound')}</ButtonMenuItem>\n            <ButtonMenuItem as=\"button\">{t('Harvest')}</ButtonMenuItem>\n          </ButtonMenu>\n          <Flex ml=\"10px\" ref={targetRef}>\n            <HelpIcon color=\"textSubtle\" />\n          </Flex>\n          {tooltipVisible && tooltip}\n        </Flex>\n      )}\n\n      <Flex justifyContent=\"space-between\" alignItems=\"center\" mb=\"24px\">\n        <Text>{shouldCompound ? t('Compounding') : t('Harvesting')}:</Text>\n        <Flex flexDirection=\"column\">\n          <Heading>\n            {formattedBalance} {earningToken.symbol}\n          </Heading>\n          <Text fontSize=\"12px\" color=\"textSubtle\">{`~${earningsDollarValue || 0} USD`}</Text>\n        </Flex>\n      </Flex>\n\n      <Button\n        mt=\"8px\"\n        onClick={handleHarvestConfirm}\n        isLoading={pendingTx}\n        endIcon={pendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\n      >\n        {pendingTx ? t('Confirming') : t('Confirm')}\n      </Button>\n      <Button variant=\"text\" onClick={onDismiss} pb=\"0px\">\n        {t('Close window')}\n      </Button>\n    </Modal>\n  )\n}\n\nexport default CollectModal\n"]},"metadata":{},"sourceType":"module"}