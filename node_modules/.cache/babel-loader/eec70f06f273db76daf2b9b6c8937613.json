{"ast":null,"code":"var _jsxFileName = \"/home/duckets/Documents/pancake-frontend-1/src/views/Predictions/components/ReclaimPositionButton.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { AutoRenewIcon, Button } from '@pancakeswap/uikit';\nimport { useWeb3React } from '@web3-react/core';\nimport { useTranslation } from 'contexts/Localization';\nimport { usePredictionsContract } from 'hooks/useContract';\nimport useToast from 'hooks/useToast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ReclaimPositionButton = ({\n  epoch,\n  onSuccess,\n  children,\n  ...props\n}) => {\n  _s();\n\n  const [isPendingTx, setIsPendingTx] = useState(false);\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useWeb3React();\n  const predictionsContract = usePredictionsContract();\n  const {\n    toastSuccess,\n    toastError\n  } = useToast();\n\n  const handleReclaim = () => {\n    predictionsContract.methods.claim(epoch).send({\n      from: account\n    }).once('sending', () => {\n      setIsPendingTx(true);\n    }).once('receipt', async () => {\n      if (onSuccess) {\n        await onSuccess();\n      }\n\n      setIsPendingTx(false);\n      toastSuccess(t('Position reclaimed!'));\n    }).once('error', error => {\n      setIsPendingTx(false);\n      toastError('Error', error === null || error === void 0 ? void 0 : error.message);\n      console.error(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Button, {\n    onClick: handleReclaim,\n    isLoading: isPendingTx,\n    endIcon: isPendingTx ? /*#__PURE__*/_jsxDEV(AutoRenewIcon, {\n      spin: true,\n      color: \"white\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 30\n    }, this) : null,\n    ...props,\n    children: children || t('Reclaim Position')\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ReclaimPositionButton, \"Br21Pp1k9e6G6e81gkdq+ABxtE8=\", false, function () {\n  return [useTranslation, useWeb3React, usePredictionsContract, useToast];\n});\n\n_c = ReclaimPositionButton;\nexport default ReclaimPositionButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReclaimPositionButton\");","map":{"version":3,"sources":["/home/duckets/Documents/pancake-frontend-1/src/views/Predictions/components/ReclaimPositionButton.tsx"],"names":["React","useState","AutoRenewIcon","Button","useWeb3React","useTranslation","usePredictionsContract","useToast","ReclaimPositionButton","epoch","onSuccess","children","props","isPendingTx","setIsPendingTx","t","account","predictionsContract","toastSuccess","toastError","handleReclaim","methods","claim","send","from","once","error","message","console"],"mappings":";;;AAAA,OAAOA,KAAP,IAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,aAAT,EAAwBC,MAAxB,QAAmD,oBAAnD;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,cAAT,QAA+B,uBAA/B;AACA,SAASC,sBAAT,QAAuC,mBAAvC;AACA,OAAOC,QAAP,MAAqB,gBAArB;;;AAQA,MAAMC,qBAA2D,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA,SAAT;AAAoBC,EAAAA,QAApB;AAA8B,KAAGC;AAAjC,CAAD,KAA8C;AAAA;;AAChH,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCb,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM;AAAEc,IAAAA;AAAF,MAAQV,cAAc,EAA5B;AACA,QAAM;AAAEW,IAAAA;AAAF,MAAcZ,YAAY,EAAhC;AACA,QAAMa,mBAAmB,GAAGX,sBAAsB,EAAlD;AACA,QAAM;AAAEY,IAAAA,YAAF;AAAgBC,IAAAA;AAAhB,MAA+BZ,QAAQ,EAA7C;;AAEA,QAAMa,aAAa,GAAG,MAAM;AAC1BH,IAAAA,mBAAmB,CAACI,OAApB,CACGC,KADH,CACSb,KADT,EAEGc,IAFH,CAEQ;AAAEC,MAAAA,IAAI,EAAER;AAAR,KAFR,EAGGS,IAHH,CAGQ,SAHR,EAGmB,MAAM;AACrBX,MAAAA,cAAc,CAAC,IAAD,CAAd;AACD,KALH,EAMGW,IANH,CAMQ,SANR,EAMmB,YAAY;AAC3B,UAAIf,SAAJ,EAAe;AACb,cAAMA,SAAS,EAAf;AACD;;AACDI,MAAAA,cAAc,CAAC,KAAD,CAAd;AACAI,MAAAA,YAAY,CAACH,CAAC,CAAC,qBAAD,CAAF,CAAZ;AACD,KAZH,EAaGU,IAbH,CAaQ,OAbR,EAakBC,KAAD,IAAW;AACxBZ,MAAAA,cAAc,CAAC,KAAD,CAAd;AACAK,MAAAA,UAAU,CAAC,OAAD,EAAUO,KAAV,aAAUA,KAAV,uBAAUA,KAAK,CAAEC,OAAjB,CAAV;AACAC,MAAAA,OAAO,CAACF,KAAR,CAAcA,KAAd;AACD,KAjBH;AAkBD,GAnBD;;AAqBA,sBACE,QAAC,MAAD;AACE,IAAA,OAAO,EAAEN,aADX;AAEE,IAAA,SAAS,EAAEP,WAFb;AAGE,IAAA,OAAO,EAAEA,WAAW,gBAAG,QAAC,aAAD;AAAe,MAAA,IAAI,MAAnB;AAAoB,MAAA,KAAK,EAAC;AAA1B;AAAA;AAAA;AAAA;AAAA,YAAH,GAA0C,IAHhE;AAAA,OAIMD,KAJN;AAAA,cAMGD,QAAQ,IAAII,CAAC,CAAC,kBAAD;AANhB;AAAA;AAAA;AAAA;AAAA,UADF;AAUD,CAtCD;;GAAMP,qB;UAEUH,c,EACMD,Y,EACQE,sB,EACSC,Q;;;KALjCC,qB;AAwCN,eAAeA,qBAAf","sourcesContent":["import React, { ReactNode, useState } from 'react'\nimport { AutoRenewIcon, Button, ButtonProps } from '@pancakeswap/uikit'\nimport { useWeb3React } from '@web3-react/core'\nimport { useTranslation } from 'contexts/Localization'\nimport { usePredictionsContract } from 'hooks/useContract'\nimport useToast from 'hooks/useToast'\n\ninterface ReclaimPositionButtonProps extends ButtonProps {\n  epoch: number\n  onSuccess?: () => Promise<void>\n  children?: ReactNode\n}\n\nconst ReclaimPositionButton: React.FC<ReclaimPositionButtonProps> = ({ epoch, onSuccess, children, ...props }) => {\n  const [isPendingTx, setIsPendingTx] = useState(false)\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n  const predictionsContract = usePredictionsContract()\n  const { toastSuccess, toastError } = useToast()\n\n  const handleReclaim = () => {\n    predictionsContract.methods\n      .claim(epoch)\n      .send({ from: account })\n      .once('sending', () => {\n        setIsPendingTx(true)\n      })\n      .once('receipt', async () => {\n        if (onSuccess) {\n          await onSuccess()\n        }\n        setIsPendingTx(false)\n        toastSuccess(t('Position reclaimed!'))\n      })\n      .once('error', (error) => {\n        setIsPendingTx(false)\n        toastError('Error', error?.message)\n        console.error(error)\n      })\n  }\n\n  return (\n    <Button\n      onClick={handleReclaim}\n      isLoading={isPendingTx}\n      endIcon={isPendingTx ? <AutoRenewIcon spin color=\"white\" /> : null}\n      {...props}\n    >\n      {children || t('Reclaim Position')}\n    </Button>\n  )\n}\n\nexport default ReclaimPositionButton\n"]},"metadata":{},"sourceType":"module"}