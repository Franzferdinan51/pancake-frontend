{"ast":null,"code":"var _jsxFileName = \"/home/duckets/Documents/pancake-frontend-1/src/views/Ifos/components/IfoFoldableCard/IfoPoolCard/ContributeModal.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport BigNumber from 'bignumber.js';\nimport { ethers } from 'ethers';\nimport { Modal, ModalBody, Text, Image, Button, BalanceInput, Flex } from '@pancakeswap/uikit';\nimport { PoolIds } from 'config/constants/types';\nimport { useTranslation } from 'contexts/Localization';\nimport { getBalanceNumber, formatNumber } from 'utils/formatBalance';\nimport { getAddress } from 'utils/addressHelpers';\nimport ApproveConfirmButtons from 'views/Profile/components/ApproveConfirmButtons';\nimport useApproveConfirmTransaction from 'hooks/useApproveConfirmTransaction';\nimport { DEFAULT_TOKEN_DECIMAL } from 'config';\nimport { useERC20 } from 'hooks/useContract';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst multiplierValues = [0.1, 0.25, 0.5, 0.75, 1];\n\nconst ContributeModal = ({\n  poolId,\n  ifo,\n  publicIfoData,\n  walletIfoData,\n  userCurrencyBalance,\n  onDismiss,\n  onSuccess\n}) => {\n  _s();\n\n  const publicPoolCharacteristics = publicIfoData[poolId];\n  const userPoolCharacteristics = walletIfoData[poolId];\n  const {\n    currency\n  } = ifo;\n  const {\n    limitPerUserInLP\n  } = publicPoolCharacteristics;\n  const {\n    amountTokenCommittedInLP\n  } = userPoolCharacteristics;\n  const {\n    contract\n  } = walletIfoData;\n  const [value, setValue] = useState('');\n  const {\n    account\n  } = useWeb3React();\n  const raisingTokenContract = useERC20(getAddress(currency.address));\n  const {\n    t\n  } = useTranslation();\n  const valueWithTokenDecimals = new BigNumber(value).times(DEFAULT_TOKEN_DECIMAL);\n  const {\n    isApproving,\n    isApproved,\n    isConfirmed,\n    isConfirming,\n    handleApprove,\n    handleConfirm\n  } = useApproveConfirmTransaction({\n    onRequiresApproval: async () => {\n      try {\n        const response = await raisingTokenContract.methods.allowance(account, contract.options.address).call();\n        const currentAllowance = new BigNumber(response);\n        return currentAllowance.gt(0);\n      } catch (error) {\n        return false;\n      }\n    },\n    onApprove: () => {\n      return raisingTokenContract.methods.approve(contract.options.address, ethers.constants.MaxUint256).send({\n        from: account\n      });\n    },\n    onConfirm: () => {\n      return contract.methods.depositPool(valueWithTokenDecimals.toString(), poolId === PoolIds.poolBasic ? 0 : 1).send({\n        from: account\n      });\n    },\n    onSuccess: async () => {\n      await onSuccess(valueWithTokenDecimals);\n      onDismiss();\n    }\n  });\n\n  const maximumLpCommitable = (() => {\n    if (limitPerUserInLP.isGreaterThan(0)) {\n      return limitPerUserInLP.minus(amountTokenCommittedInLP).isLessThanOrEqualTo(userCurrencyBalance) ? limitPerUserInLP : userCurrencyBalance;\n    }\n\n    return userCurrencyBalance;\n  })();\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: `Contribute ${currency.symbol}`,\n    onDismiss: onDismiss,\n    children: /*#__PURE__*/_jsxDEV(ModalBody, {\n      maxWidth: \"320px\",\n      children: [limitPerUserInLP.isGreaterThan(0) && /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        mb: \"16px\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          children: t('Max. LP token entry')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          children: getBalanceNumber(limitPerUserInLP, currency.decimals)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        mb: \"8px\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          children: t('Commit:')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          flexGrow: 1,\n          justifyContent: \"flex-end\",\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            src: `/images/farms/${currency.symbol.split(' ')[0].toLocaleLowerCase()}.svg`,\n            width: 24,\n            height: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            children: currency.symbol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BalanceInput, {\n        value: value,\n        currencyValue: publicIfoData.currencyPriceInUSD.times(value || 0).toFixed(2),\n        onUserInput: setValue,\n        isWarning: valueWithTokenDecimals.isGreaterThan(maximumLpCommitable),\n        mb: \"8px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        color: \"textSubtle\",\n        textAlign: \"right\",\n        fontSize: \"12px\",\n        mb: \"16px\",\n        children: [\"Balance: \", formatNumber(getBalanceNumber(userCurrencyBalance, currency.decimals), 2, 5)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        mb: \"16px\",\n        children: multiplierValues.map((multiplierValue, index) => /*#__PURE__*/_jsxDEV(Button, {\n          scale: \"xs\",\n          variant: \"tertiary\",\n          onClick: () => setValue(getBalanceNumber(maximumLpCommitable.times(multiplierValue)).toString()),\n          mr: index < multiplierValues.length - 1 ? '8px' : 0,\n          children: t(`${multiplierValue * 100}%`)\n        }, multiplierValue, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        color: \"textSubtle\",\n        fontSize: \"12px\",\n        mb: \"24px\",\n        children: t('If you don’t commit enough LP tokens, you may not receive any IFO tokens at all and will only receive a full refund of your LP tokens.')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ApproveConfirmButtons, {\n        isApproveDisabled: isConfirmed || isConfirming || isApproved,\n        isApproving: isApproving,\n        isConfirmDisabled: !isApproved || isConfirmed || valueWithTokenDecimals.isNaN() || valueWithTokenDecimals.eq(0),\n        isConfirming: isConfirming,\n        onApprove: handleApprove,\n        onConfirm: handleConfirm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ContributeModal, \"b5tF8rkKkmi2l224Pck7j0xVf0A=\", false, function () {\n  return [useWeb3React, useERC20, useTranslation, useApproveConfirmTransaction];\n});\n\n_c = ContributeModal;\nexport default ContributeModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContributeModal\");","map":{"version":3,"sources":["/home/duckets/Documents/pancake-frontend-1/src/views/Ifos/components/IfoFoldableCard/IfoPoolCard/ContributeModal.tsx"],"names":["React","useState","useWeb3React","BigNumber","ethers","Modal","ModalBody","Text","Image","Button","BalanceInput","Flex","PoolIds","useTranslation","getBalanceNumber","formatNumber","getAddress","ApproveConfirmButtons","useApproveConfirmTransaction","DEFAULT_TOKEN_DECIMAL","useERC20","multiplierValues","ContributeModal","poolId","ifo","publicIfoData","walletIfoData","userCurrencyBalance","onDismiss","onSuccess","publicPoolCharacteristics","userPoolCharacteristics","currency","limitPerUserInLP","amountTokenCommittedInLP","contract","value","setValue","account","raisingTokenContract","address","t","valueWithTokenDecimals","times","isApproving","isApproved","isConfirmed","isConfirming","handleApprove","handleConfirm","onRequiresApproval","response","methods","allowance","options","call","currentAllowance","gt","error","onApprove","approve","constants","MaxUint256","send","from","onConfirm","depositPool","toString","poolBasic","maximumLpCommitable","isGreaterThan","minus","isLessThanOrEqualTo","symbol","decimals","split","toLocaleLowerCase","currencyPriceInUSD","toFixed","map","multiplierValue","index","length","isNaN","eq"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport BigNumber from 'bignumber.js'\nimport { ethers } from 'ethers'\nimport { Modal, ModalBody, Text, Image, Button, BalanceInput, Flex } from '@pancakeswap/uikit'\nimport { PoolIds, Ifo } from 'config/constants/types'\nimport { WalletIfoData, PublicIfoData } from 'hooks/ifo/types'\nimport { useTranslation } from 'contexts/Localization'\nimport { getBalanceNumber, formatNumber } from 'utils/formatBalance'\nimport { getAddress } from 'utils/addressHelpers'\nimport ApproveConfirmButtons from 'views/Profile/components/ApproveConfirmButtons'\nimport useApproveConfirmTransaction from 'hooks/useApproveConfirmTransaction'\nimport { DEFAULT_TOKEN_DECIMAL } from 'config'\nimport { useERC20 } from 'hooks/useContract'\n\ninterface Props {\n  poolId: PoolIds\n  ifo: Ifo\n  publicIfoData: PublicIfoData\n  walletIfoData: WalletIfoData\n  userCurrencyBalance: BigNumber\n  onSuccess: (amount: BigNumber) => void\n  onDismiss?: () => void\n}\n\nconst multiplierValues = [0.1, 0.25, 0.5, 0.75, 1]\n\nconst ContributeModal: React.FC<Props> = ({\n  poolId,\n  ifo,\n  publicIfoData,\n  walletIfoData,\n  userCurrencyBalance,\n  onDismiss,\n  onSuccess,\n}) => {\n  const publicPoolCharacteristics = publicIfoData[poolId]\n  const userPoolCharacteristics = walletIfoData[poolId]\n\n  const { currency } = ifo\n  const { limitPerUserInLP } = publicPoolCharacteristics\n  const { amountTokenCommittedInLP } = userPoolCharacteristics\n  const { contract } = walletIfoData\n  const [value, setValue] = useState('')\n  const { account } = useWeb3React()\n  const raisingTokenContract = useERC20(getAddress(currency.address))\n  const { t } = useTranslation()\n  const valueWithTokenDecimals = new BigNumber(value).times(DEFAULT_TOKEN_DECIMAL)\n\n  const { isApproving, isApproved, isConfirmed, isConfirming, handleApprove, handleConfirm } =\n    useApproveConfirmTransaction({\n      onRequiresApproval: async () => {\n        try {\n          const response = await raisingTokenContract.methods.allowance(account, contract.options.address).call()\n          const currentAllowance = new BigNumber(response)\n          return currentAllowance.gt(0)\n        } catch (error) {\n          return false\n        }\n      },\n      onApprove: () => {\n        return raisingTokenContract.methods\n          .approve(contract.options.address, ethers.constants.MaxUint256)\n          .send({ from: account })\n      },\n      onConfirm: () => {\n        return contract.methods\n          .depositPool(valueWithTokenDecimals.toString(), poolId === PoolIds.poolBasic ? 0 : 1)\n          .send({ from: account })\n      },\n      onSuccess: async () => {\n        await onSuccess(valueWithTokenDecimals)\n        onDismiss()\n      },\n    })\n\n  const maximumLpCommitable = (() => {\n    if (limitPerUserInLP.isGreaterThan(0)) {\n      return limitPerUserInLP.minus(amountTokenCommittedInLP).isLessThanOrEqualTo(userCurrencyBalance)\n        ? limitPerUserInLP\n        : userCurrencyBalance\n    }\n    return userCurrencyBalance\n  })()\n\n  return (\n    <Modal title={`Contribute ${currency.symbol}`} onDismiss={onDismiss}>\n      <ModalBody maxWidth=\"320px\">\n        {limitPerUserInLP.isGreaterThan(0) && (\n          <Flex justifyContent=\"space-between\" mb=\"16px\">\n            <Text>{t('Max. LP token entry')}</Text>\n            <Text>{getBalanceNumber(limitPerUserInLP, currency.decimals)}</Text>\n          </Flex>\n        )}\n        <Flex justifyContent=\"space-between\" mb=\"8px\">\n          <Text>{t('Commit:')}</Text>\n          <Flex flexGrow={1} justifyContent=\"flex-end\">\n            <Image\n              src={`/images/farms/${currency.symbol.split(' ')[0].toLocaleLowerCase()}.svg`}\n              width={24}\n              height={24}\n            />\n            <Text>{currency.symbol}</Text>\n          </Flex>\n        </Flex>\n        <BalanceInput\n          value={value}\n          currencyValue={publicIfoData.currencyPriceInUSD.times(value || 0).toFixed(2)}\n          onUserInput={setValue}\n          isWarning={valueWithTokenDecimals.isGreaterThan(maximumLpCommitable)}\n          mb=\"8px\"\n        />\n        <Text color=\"textSubtle\" textAlign=\"right\" fontSize=\"12px\" mb=\"16px\">\n          Balance: {formatNumber(getBalanceNumber(userCurrencyBalance, currency.decimals), 2, 5)}\n        </Text>\n        <Flex justifyContent=\"space-between\" mb=\"16px\">\n          {multiplierValues.map((multiplierValue, index) => (\n            <Button\n              key={multiplierValue}\n              scale=\"xs\"\n              variant=\"tertiary\"\n              onClick={() => setValue(getBalanceNumber(maximumLpCommitable.times(multiplierValue)).toString())}\n              mr={index < multiplierValues.length - 1 ? '8px' : 0}\n            >\n              {t(`${multiplierValue * 100}%`)}\n            </Button>\n          ))}\n        </Flex>\n        <Text color=\"textSubtle\" fontSize=\"12px\" mb=\"24px\">\n          {t(\n            'If you don’t commit enough LP tokens, you may not receive any IFO tokens at all and will only receive a full refund of your LP tokens.',\n          )}\n        </Text>\n        <ApproveConfirmButtons\n          isApproveDisabled={isConfirmed || isConfirming || isApproved}\n          isApproving={isApproving}\n          isConfirmDisabled={\n            !isApproved || isConfirmed || valueWithTokenDecimals.isNaN() || valueWithTokenDecimals.eq(0)\n          }\n          isConfirming={isConfirming}\n          onApprove={handleApprove}\n          onConfirm={handleConfirm}\n        />\n      </ModalBody>\n    </Modal>\n  )\n}\n\nexport default ContributeModal\n"]},"metadata":{},"sourceType":"module"}