{"ast":null,"code":"var _jsxFileName = \"/home/duckets/Documents/pancake-frontend-1/src/views/Profile/components/EditProfileModal/ApproveCakeView.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { AutoRenewIcon, Button, Flex, Text } from '@pancakeswap/uikit';\nimport { useTranslation } from 'contexts/Localization';\nimport { useCake } from 'hooks/useContract';\nimport useToast from 'hooks/useToast';\nimport { useProfile } from 'state/hooks';\nimport { getPancakeProfileAddress } from 'utils/addressHelpers';\nimport { getFullDisplayBalance } from 'utils/formatBalance';\nimport useGetProfileCosts from 'hooks/useGetProfileCosts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ApproveCakePage = ({\n  goToChange,\n  onDismiss\n}) => {\n  _s();\n\n  const [isApproving, setIsApproving] = useState(false);\n  const {\n    profile\n  } = useProfile();\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useWeb3React();\n  const {\n    numberCakeToUpdate,\n    numberCakeToReactivate\n  } = useGetProfileCosts();\n  const cakeContract = useCake();\n  const {\n    toastError\n  } = useToast();\n  const cost = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate;\n\n  const handleApprove = () => {\n    cakeContract.methods.approve(getPancakeProfileAddress(), cost.times(2).toJSON()).send({\n      from: account\n    }).on('sending', () => {\n      setIsApproving(true);\n    }).on('receipt', () => {\n      goToChange();\n    }).on('error', error => {\n      toastError('Error', error === null || error === void 0 ? void 0 : error.message);\n      setIsApproving(false);\n    });\n  };\n\n  if (!profile) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Flex, {\n    flexDirection: \"column\",\n    children: [/*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      mb: \"24px\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        children: profile.isActive ? t('Cost to update:') : t('Cost to reactivate:')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        children: t(`${getFullDisplayBalance(cost)} CAKE`)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      disabled: isApproving,\n      isLoading: isApproving,\n      endIcon: isApproving ? /*#__PURE__*/_jsxDEV(AutoRenewIcon, {\n        spin: true,\n        color: \"currentColor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 32\n      }, this) : null,\n      width: \"100%\",\n      mb: \"8px\",\n      onClick: handleApprove,\n      children: t('Approve')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"text\",\n      width: \"100%\",\n      onClick: onDismiss,\n      disabled: isApproving,\n      children: t('Close Window')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ApproveCakePage, \"dNTkHGY8N3FIrfBr7Tq6tlYipYA=\", false, function () {\n  return [useProfile, useTranslation, useWeb3React, useGetProfileCosts, useCake, useToast];\n});\n\n_c = ApproveCakePage;\nexport default ApproveCakePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ApproveCakePage\");","map":{"version":3,"sources":["/home/duckets/Documents/pancake-frontend-1/src/views/Profile/components/EditProfileModal/ApproveCakeView.tsx"],"names":["React","useState","useWeb3React","AutoRenewIcon","Button","Flex","Text","useTranslation","useCake","useToast","useProfile","getPancakeProfileAddress","getFullDisplayBalance","useGetProfileCosts","ApproveCakePage","goToChange","onDismiss","isApproving","setIsApproving","profile","t","account","numberCakeToUpdate","numberCakeToReactivate","cakeContract","toastError","cost","isActive","handleApprove","methods","approve","times","toJSON","send","from","on","error","message"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { AutoRenewIcon, Button, Flex, InjectedModalProps, Text } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport { useCake } from 'hooks/useContract'\nimport useToast from 'hooks/useToast'\nimport { useProfile } from 'state/hooks'\nimport { getPancakeProfileAddress } from 'utils/addressHelpers'\nimport { getFullDisplayBalance } from 'utils/formatBalance'\nimport useGetProfileCosts from 'hooks/useGetProfileCosts'\nimport { UseEditProfileResponse } from './reducer'\n\ninterface ApproveCakePageProps extends InjectedModalProps {\n  goToChange: UseEditProfileResponse['goToChange']\n}\n\nconst ApproveCakePage: React.FC<ApproveCakePageProps> = ({ goToChange, onDismiss }) => {\n  const [isApproving, setIsApproving] = useState(false)\n  const { profile } = useProfile()\n  const { t } = useTranslation()\n  const { account } = useWeb3React()\n  const { numberCakeToUpdate, numberCakeToReactivate } = useGetProfileCosts()\n  const cakeContract = useCake()\n  const { toastError } = useToast()\n  const cost = profile.isActive ? numberCakeToUpdate : numberCakeToReactivate\n\n  const handleApprove = () => {\n    cakeContract.methods\n      .approve(getPancakeProfileAddress(), cost.times(2).toJSON())\n      .send({ from: account })\n      .on('sending', () => {\n        setIsApproving(true)\n      })\n      .on('receipt', () => {\n        goToChange()\n      })\n      .on('error', (error) => {\n        toastError('Error', error?.message)\n        setIsApproving(false)\n      })\n  }\n\n  if (!profile) {\n    return null\n  }\n\n  return (\n    <Flex flexDirection=\"column\">\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"24px\">\n        <Text>{profile.isActive ? t('Cost to update:') : t('Cost to reactivate:')}</Text>\n        <Text>{t(`${getFullDisplayBalance(cost)} CAKE`)}</Text>\n      </Flex>\n      <Button\n        disabled={isApproving}\n        isLoading={isApproving}\n        endIcon={isApproving ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\n        width=\"100%\"\n        mb=\"8px\"\n        onClick={handleApprove}\n      >\n        {t('Approve')}\n      </Button>\n      <Button variant=\"text\" width=\"100%\" onClick={onDismiss} disabled={isApproving}>\n        {t('Close Window')}\n      </Button>\n    </Flex>\n  )\n}\n\nexport default ApproveCakePage\n"]},"metadata":{},"sourceType":"module"}